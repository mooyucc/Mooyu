# School Insight AI 提示词说明

本文档汇总了 School Insight 系统中所有 AI 提示词的要求和规范。

## 目录

1. [学校评分对比提示词](#1-学校评分对比提示词)
2. [查询学校基础信息提示词](#2-查询学校基础信息提示词)
3. [生成对比结论提示词](#3-生成对比结论提示词)
4. [搜索可能的学校名称提示词](#4-搜索可能的学校名称提示词)
5. [通用要求](#5-通用要求)

---

## 1. 学校评分对比提示词

### 1.1 功能说明

用于对多所学校进行量化评分对比，生成详细的评估报告。

### 1.2 角色定义

```
你是一位专业的学校评估专家。请根据以下评估体系，对以下学校进行量化评分对比（满分100分）。
```

### 1.3 三步搜索法

**请严格按照三步搜索法进行信息搜索和验证：**

1. **第一步：官网扫描**
   - 访问学校官方网站
   - 查找认证(Accreditation)页面，核实IBO、College Board、CIE等标志
   - 查找"中西融合"教案，核算外教任课比例
   - 查看School Profile(学校概况)PDF等官方文档

2. **第二步：社交媒体**
   - 查阅学校官方公众号、社交媒体账号
   - 查看"竞赛战报"等信息，核实是否为国际主流竞赛（如AMC, VEX等）
   - 关注家长口碑、学生反馈、压力感知等信息

3. **第三步：行业背书**
   - 查找行业排名、竞赛获奖记录、百强排名等第三方认证信息
   - 关注Cialfo/Maia系统、ACAMIS/ISAC联赛、PD预算等核心关键词
   - 帮助从海量营销信息中筛选出真正代表学校实力的硬核数据

### 1.4 评估体系结构

评估体系包含三级维度结构：

- **一级维度**：科研、升学、教学、国际化、社会影响
- **二级指标**：每个一级维度下包含多个二级指标（共10个）
- **三级维度**：每个二级指标下包含多个三级维度，每个三级维度有5分制评分标准

**重要说明**：
- 评估体系用于内部评分计算
- 最终返回结果只需包含一级维度和二级指标，不显示三级维度

### 1.5 评估体系内容

评估体系从 `evaluation-system.js` 动态读取，包含：

1. **学术卓越**（权重30%）
   - 课程与融合（15%）
   - 学术评估（15%）

2. **全球升学**（权重20%）
   - 升学成果（10%）
   - 规划体系（10%）

3. **师资交互**（权重15%）
   - 师资稳定（8%）
   - 课堂文化（7%）

4. **全人成长**（权重20%）
   - 活动系统（10%）
   - 幸福感/生活（10%）

5. **社会影响**（权重15%）
   - 品牌与社区影响力（15%）

每个二级指标都包含：
- 指标名称
- 权重值（百分比，必须使用精确数值）
- 说明
- 三级维度及其5分制评分标准

### 1.6 学校信息输入格式

提示词中包含每所学校的以下信息：

```
学校1：学校名称
- 学校类型：xxx
- 涵盖学段：xxx
- 学段设置：幼儿园xxx，小学xxx，初中xxx，高中xxx
- IB课程：PYP xxx，MYP xxx，DP xxx，CP xxx
- 其他课程：A-Level xxx，AP xxx，IGCSE xxx，加拿大课程 xxx，澳大利亚课程 xxx，其他课程 xxx
```

### 1.6 评分方法要求

**重要约束**：
1. **权重数值必须严格按照评估体系中的权重值，不能修改或调整！** 每个二级指标的权重是固定的百分比。
2. 对每个三级维度按照5分制评分标准进行评分（1-5分）
3. 根据三级维度得分计算二级指标得分：
   ```
   二级指标得分 = Σ(三级维度得分 ÷ 5 × 三级维度权重)
   ```
   例如：如果某个三级维度得分为4分，权重为10分，则贡献值为 4÷5×10 = 8分
4. **二级指标得分不能超过其权重值**
5. **评分说明要求**：
   - 只需要概括性地描述学校在该二级指标上的整体表现
   - 不要详细列出每个三级维度的得分情况
   - 评分说明应该简洁明了，突出两所学校的对比特点
   - 示例："学校A的课程体系非常全面，覆盖IB全阶段及A-Level、AP、IGCSE等，体系成熟度高，在家长和学界有较高口碑。学校B是IB世界学校，提供IB全阶段课程并辅以AP和IGCSE，体系权威且稳定，但课程广度略逊于学校A。"

### 1.7 返回格式要求

#### 1.7.1 量化对比表

必须包含以下信息（只显示一级维度和二级指标，不显示三级维度）：

- **评估维度**（一级维度）
- **指标名称**（二级指标）
- **权重**（二级指标权重，必须与评估体系中的权重值完全一致，不可修改）
- **每所学校的得分**（二级指标得分，满分=权重数值，得分不能超过权重值）
- **评分说明**（概括性的，简要对比说明两所学校在该指标上的整体表现和特点）

#### 1.7.2 总分汇总

- 每所学校的总分（各项二级指标得分相加，满分100分）

#### 1.7.3 最终总结与选择建议

包括：
- 每所学校的总分
- 每所学校的优势（在高权重指标上的表现）
- 每所学校的特点（整体定位）
- 适合的家庭类型
- 核心结论和建议

### 1.8 JSON 返回格式

```json
{
  "comparisonTable": [
    {
      "dimension": "学术卓越",
      "indicator": "课程与融合",
      "weight": 15,
      "scores": {
        "学校1名称": 得分数字（0-15之间）,
        "学校2名称": 得分数字（0-15之间）
      },
      "explanations": {
        "学校1名称": "概括性说明该学校在此指标上的整体表现和特点（不要详细列出第三级维度得分）",
        "学校2名称": "概括性说明该学校在此指标上的整体表现和特点（不要详细列出第三级维度得分）"
      }
    },
    // ... 其他8个二级指标
  ],
  "totalScores": {
    "学校1名称": 总分数字,
    "学校2名称": 总分数字
  },
  "summary": {
    "学校1名称": {
      "totalScore": 总分数字,
      "strengths": "优势描述",
      "characteristics": "特点描述",
      "suitableFor": "适合的家庭类型"
    },
    "学校2名称": {
      "totalScore": 总分数字,
      "strengths": "优势描述",
      "characteristics": "特点描述",
      "suitableFor": "适合的家庭类型"
    },
    "conclusion": "核心结论和建议"
  }
}
```

### 1.9 关键约束

1. **权重值必须与评估体系中的权重值完全一致，不可修改**
2. **二级指标得分不能超过其权重值**
3. **总分不能超过100分**
4. **评分说明必须是概括性的，不能详细列出第三级维度得分**
5. **所有得分必须是数字类型，保留一位小数**

---

## 2. 查询学校基础信息提示词

### 2.1 功能说明

根据学校名称查询学校的基础信息，用于创建新学校记录或补充缺失字段。

### 2.2 角色定义

```
你是一位专业的学校信息查询专家。请根据学校名称"${schoolName}"，查询并返回该学校的基础信息。
```

### 2.3 重要提示

**重要：请务必查询准确的官方网址**

### 2.4 三步搜索法

**请严格按照三步搜索法进行信息查询：**

1. **第一步：官网扫描**
   - 访问学校官方网站
   - 查找认证(Accreditation)页面，核实IBO、College Board、CIE等标志
   - 查找"中西融合"教案，核算外教任课比例
   - 查看School Profile(学校概况)PDF等官方文档

2. **第二步：社交媒体**
   - 查阅学校官方公众号、社交媒体账号
   - 查看"竞赛战报"等信息，核实是否为国际主流竞赛（如AMC, VEX等）

3. **第三步：行业背书**
   - 查找行业排名、竞赛获奖记录、百强排名等第三方认证信息

### 2.5 需要查询的信息

1. **学校名称**（完整准确的全称）

2. **学校网址**（非常重要！）
   - 请务必查询该学校的官方网站
   - 确保网址准确无误
   - 网址格式应为完整的URL，如：`https://example.com` 或 `https://www.example.com`
   - 如果无法确定准确的官方网址，请留空

3. **国家**（学校所在的国家，如：中国、美国、英国等）

4. **城市**（学校所在的城市，如：上海、北京、纽约等）

5. **学校类型**（**重要：必须从以下四类中选择一类，不能使用其他描述**）：
   - **"公立学校"**：政府主办，普惠，择校难
   - **"普通民办学校"**：机制灵活，追求成绩或特色
   - **"民办双语学校"**：为出国留学铺路，环境多元，提供国际课程（IB/AP/A-Level等）
   - **"公立学校（国际部）"**：公立学校下设的国际部，提供国际课程

   **判断标准**：
   - 如果学校名称包含"公立"、"公办"等，且包含"国际部"、"国际班"等，选择"公立学校（国际部）"
   - 如果学校名称包含"公立"、"公办"等，且不包含国际部相关关键词，选择"公立学校"
   - 如果学校是民办性质，且提供国际课程（IB/AP/A-Level等），选择"民办双语学校"
   - 如果学校是民办性质，但不提供国际课程或主要面向国内升学，选择"普通民办学校"

6. **涵盖学段**（**重要：必须从"幼儿园"、"小学"、"初中"、"高中"中选择，用"、"分隔，如："幼儿园、小学、初中、高中"或"小学、初中、高中"。不要使用"K-12"等英文格式）：
   - 根据学校实际开设的学段，从以下选项中选择并组合：
     * 幼儿园
     * 小学
     * 初中
     * 高中
   - 示例：
     * 如果学校开设幼儿园、小学、初中、高中，填写："幼儿园、小学、初中、高中"
     * 如果学校只开设小学、初中、高中，填写："小学、初中、高中"
     * 如果学校只开设初中、高中，填写："初中、高中"

7. **隶属教育集团**（如果学校隶属于某个教育集团，请填写集团名称；如果学校没有隶属任何教育集团，请填写"无"）

8. **学段设置**：
   - 幼儿园（有/无）
   - 小学（有/无）
   - 初中（有/无）
   - 高中（有/无）

9. **IB课程**：
   - IB PYP（有/无，如果有请填写"IB（国际文凭课程）PYP"，否则填"无"）
   - IB MYP（有/无，如果有请填写"IB（国际文凭课程）MYP"，否则填"无"）
   - IB DP（有/无，如果有请填写"IB（国际文凭课程）DP"，否则填"无"）
   - IB CP（有/无，如果有请填写"IB（国际文凭课程）CP"，否则填"无"）

10. **其他课程**：
    - A-Level（有/无，如果有请填写"A-Level（英国高中课程）"，否则填"无"）
    - AP（有/无，如果有请填写"AP（美国大学先修课程）"，否则填"无"）
    - 加拿大课程（有/无）
    - 澳大利亚课程（有/无）
    - IGCSE（有/无）
    - 其他课程（如有，请详细列出）

### 2.5 JSON 返回格式

```json
{
  "name": "学校完整名称",
  "website": "学校官方网址（完整的URL，如 https://example.com，如果不确定请留空）",
  "country": "国家（如：中国、美国、英国等）",
  "city": "城市（如：上海、北京、纽约等）",
  "nature": "学校类型（必须是以下四类之一：'公立学校'、'普通民办学校'、'民办双语学校'、'公立学校（国际部）'）",
  "coveredStages": "涵盖学段（必须从'幼儿园'、'小学'、'初中'、'高中'中选择，用'、'分隔，如：'幼儿园、小学、初中、高中'）",
  "affiliatedGroup": "隶属教育集团（如果学校隶属于某个教育集团，请填写集团名称；如果学校没有隶属任何教育集团，请填写"无"）",
  "kindergarten": "幼儿园（有/无）",
  "primary": "小学（有/无）",
  "juniorHigh": "初中（有/无）",
  "seniorHigh": "高中（有/无）",
  "ibPYP": "IB（国际文凭课程）PYP 或 无",
  "ibMYP": "IB（国际文凭课程）MYP 或 无",
  "ibDP": "IB（国际文凭课程）DP 或 无",
  "ibCP": "IB（国际文凭课程）CP 或 无",
  "aLevel": "A-Level（英国高中课程） 或 无",
  "ap": "AP（美国大学先修课程） 或 无",
  "canadian": "加拿大课程（有/无）",
  "australian": "澳大利亚课程（有/无）",
  "igcse": "IGCSE（有/无）",
  "otherCourses": "其他课程（如有，请详细列出，否则填"无"）"
}
```

### 2.6 特别注意

**网址字段要求**：
- 网址必须是该学校的官方网站
- 网址格式必须完整，包含协议（https://或http://）
- 如果不确定准确的官方网址，请留空，不要猜测
- 不要返回不相关或错误的网址

**其他注意事项**：
- 如果某个信息无法查询到，请填写"未知"或"无"
- 请确保返回的JSON格式正确
- 学校名称必须准确完整

---

## 3. 生成对比结论提示词

### 3.1 功能说明

根据学校的评估数据，生成综合的对比结论和建议。

### 3.2 角色定义

```
你是一位专业的学校评估专家。请根据以下学校的评估数据，生成一个综合的对比结论和建议。
```

### 3.3 输入数据格式

提示词中包含每所学校的以下信息：

```
1. 学校名称（总分：xxx分）
   - 学校类型：xxx
   - 涵盖学段：xxx
   - 优势：xxx（如果有）
   - 特点：xxx（如果有）
```

### 3.4 结论生成要求

结论应该：
1. 文字简洁精炼，控制在400字以内
2. 不要使用任何Markdown格式符号（如**、##、-等），使用纯文本
3. 使用清晰的段落结构，用空行分隔不同部分
4. 直接说明各学校的总分对比和核心优势差异
5. 明确说明各学校的定位差异（如"学术强校"vs"成长乐园"）
6. 根据不同家庭需求提供简洁的选择建议
7. 语言专业但易懂，避免冗长描述

### 3.5 JSON 返回格式

```json
{
  "conclusion": "核心结论和建议（纯文本，不使用任何Markdown格式）"
}
```

---

## 4. 搜索可能的学校名称提示词

### 4.1 功能说明

根据用户输入的不完整搜索词，搜索并返回可能的完整学校名称列表。

### 4.2 角色定义

```
你是一位专业的学校信息查询专家。用户输入了"${searchTerm}"，这可能是一个不完整的学校名称。
```

### 4.3 搜索要求

- 请根据这个搜索词，搜索并返回可能的完整学校名称列表
- 请尽可能多地列出相关的学校名称（最多10个），按相关性排序

### 4.4 JSON 返回格式

```json
{
  "schoolNames": [
    "完整的学校名称1",
    "完整的学校名称2",
    "完整的学校名称3",
    ...
  ]
}
```

### 4.5 注意事项

- 只返回学校名称数组，不要返回其他信息
- 如果搜索词已经很完整，可能只返回1个结果
- 如果无法确定，请返回多个可能的选项
- 确保返回的JSON格式正确

---

## 5. 通用要求

### 5.1 API 调用配置

所有 AI 提示词通过 Deepseek API 调用，配置如下：

- **API URL**: `https://api.deepseek.com/v1/chat/completions`
- **模型**: `deepseek-chat`
- **Temperature**: `0.3`（用于评分对比，确保结果稳定）
- **Max Tokens**: `4000`

### 5.2 System Message

所有提示词都使用以下 System Message：

```
你是一位专业的学校评估专家，擅长根据评估体系对学校进行量化评分和对比分析。
```

### 5.3 返回格式要求

1. **必须使用 JSON 格式返回**
2. **JSON 格式必须正确，可以被标准 JSON 解析器解析**
3. **所有字段名称必须与文档中指定的完全一致**
4. **数字类型字段必须是数字，不能是字符串**
5. **字符串类型字段不能为空（至少是空字符串）**

### 5.4 错误处理

如果 AI 返回的数据格式不正确或缺少必要字段：

1. **学校评分对比**：
   - 系统会自动约束超出范围的得分
   - 系统会记录警告日志
   - 如果 JSON 格式错误，系统会尝试修复

2. **查询学校基础信息**：
   - 如果网址格式不正确，系统会自动验证和清理
   - 如果学校类型不在标准四类中，系统会自动统一处理
   - 如果字段缺失，系统会使用默认值（"未知"或"无"）

3. **生成对比结论**：
   - 如果生成失败，系统会返回 `null`，不影响其他功能

4. **搜索学校名称**：
   - 如果搜索失败，系统会返回空数组

### 5.5 数据验证

系统会对 AI 返回的数据进行以下验证：

1. **得分范围验证**：
   - 二级指标得分必须在 `[0, 权重值]` 范围内
   - 总分必须在 `[0, 100]` 范围内

2. **数据类型验证**：
   - 得分必须是有效数字（不能是 `NaN`、`null`、`undefined`）

3. **数据一致性验证**：
   - `summary.totalScore` 必须与 `totalScores` 保持一致

4. **网址格式验证**：
   - 网址必须包含协议（http://或https://）
   - 网址必须是有效的 URL 格式

### 5.6 提示词优化建议

1. **明确性**：所有要求都应该明确、具体，避免歧义
2. **约束性**：重要约束应该使用加粗或特殊标记强调
3. **示例性**：提供具体的示例帮助 AI 理解要求
4. **格式性**：明确指定返回格式，包括 JSON 结构
5. **完整性**：确保提示词包含所有必要的信息

---

## 6. 相关文档

- [AI评估分值约束说明.md](./AI评估分值约束说明.md) - 分值约束机制说明
- [AI评估数据映射说明.md](./AI评估数据映射说明.md) - 数据结构和字段映射
- [评估体系评分计算说明.md](./评估体系评分计算说明.md) - 评分计算方法
- [evaluation-system.js](./evaluation-system.js) - 评估体系配置文件

---

## 7. 更新记录

- **2026-01-05**: 创建文档，汇总所有 AI 提示词要求

